from __future__ import annotations

from functools import reduce
from string import ascii_letters, digits

# WIDTHS ARE PROPORTIONAL, DIVIDE AS NEEDED

INTER_13_WIDTH = {
    "0": 10.83123779296875,
    "1": 8.049575805664062,
    "2": 10.486618041992188,
    "3": 11.028167724609375,
    "4": 11.12664794921875,
    "5": 10.535842895507812,
    "6": 10.806625366210938,
    "7": 9.89581298828125,
    "8": 10.683547973632812,
    "9": 10.806625366210938,
    "a": 9.772735595703125,
    "b": 10.757400512695312,
    "c": 9.674270629882812,
    "d": 10.757400512695312,
    "e": 10.092742919921875,
    "f": 6.2525787353515625,
    "g": 10.560455322265625,
    "h": 10.240447998046875,
    "i": 4.1109466552734375,
    "j": 4.1109466552734375,
    "k": 9.4281005859375,
    "l": 4.1109466552734375,
    "m": 15.065277099609375,
    "n": 10.141983032226562,
    "o": 10.338912963867188,
    "p": 10.560455322265625,
    "q": 10.560455322265625,
    "r": 6.4495086669921875,
    "s": 9.058853149414062,
    "t": 6.3018035888671875,
    "u": 10.068130493164062,
    "v": 9.649658203125,
    "w": 14.080612182617188,
    "x": 9.354248046875,
    "y": 9.661956787109375,
    "z": 9.378875732421875,
    "A": 11.717437744140625,
    "B": 11.274337768554688,
    "C": 12.603622436523438,
    "D": 12.4559326171875,
    "E": 10.363525390625,
    "F": 10.166595458984375,
    "G": 12.874404907226562,
    "H": 12.825180053710938,
    "I": 4.5786590576171875,
    "J": 9.403488159179688,
    "K": 11.2989501953125,
    "L": 9.748123168945312,
    "M": 15.409912109375,
    "N": 13.046722412109375,
    "O": 13.194427490234375,
    "P": 11.003555297851562,
    "Q": 13.194427490234375,
    "R": 11.077407836914062,
    "S": 11.05279541015625,
    "T": 11.12664794921875,
    "U": 12.84979248046875,
    "V": 11.717437744140625,
    "W": 16.443801879882812,
    "X": 11.12664794921875,
    "Y": 11.5205078125,
    "Z": 10.83123779296875,
    "-": 7.975738525390625,
    "▬": 17.329986572265625,
    "ஜ": 16.466873168945312,
    "۩": 10.399688720703125,
    "۞": 18.793899536132812,
    "░": 12.278228759765625,
}
ROOBERT_13_WIDTH = {
    "0": 8.106658935546875,
    "1": 4.5733184814453125,
    "2": 7.4666595458984375,
    "3": 7.959991455078125,
    "4": 8.479995727539062,
    "5": 7.97332763671875,
    "6": 8.38665771484375,
    "7": 7.5333251953125,
    "8": 8.1199951171875,
    "9": 8.373321533203125,
    "a": 7.0133209228515625,
    "b": 7.959991455078125,
    "c": 7.239990234375,
    "d": 7.959991455078125,
    "e": 7.38665771484375,
    "f": 5.0533294677734375,
    "g": 8.013320922851562,
    "h": 7.5999908447265625,
    "i": 2.82666015625,
    "j": 2.82666015625,
    "k": 7,
    "l": 2.933319091796875,
    "m": 11.573333740234375,
    "n": 7.546661376953125,
    "o": 7.82666015625,
    "p": 7.959991455078125,
    "q": 7.959991455078125,
    "r": 4.8799896240234375,
    "s": 6.26666259765625,
    "t": 5.0266571044921875,
    "u": 7.546661376953125,
    "v": 6.38665771484375,
    "w": 9.906661987304688,
    "x": 6.4533233642578125,
    "y": 6.38665771484375,
    "z": 6.6133270263671875,
    "A": 8.6533203125,
    "B": 8.146652221679688,
    "C": 9.439987182617188,
    "D": 8.9466552734375,
    "E": 7.546661376953125,
    "F": 7.399993896484375,
    "G": 9.733322143554688,
    "H": 9.186660766601562,
    "I": 3.106658935546875,
    "J": 4.2133331298828125,
    "K": 8.466659545898438,
    "L": 6.97332763671875,
    "M": 11.079986572265625,
    "N": 9.213333129882812,
    "O": 10.26666259765625,
    "P": 7.813323974609375,
    "Q": 10.26666259765625,
    "R": 8.613327026367188,
    "S": 7.9199981689453125,
    "T": 7.426666259765625,
    "U": 8.693328857421875,
    "V": 8.413330078125,
    "W": 13.279998779296875,
    "X": 8.066665649414062,
    "Y": 7.8666534423828125,
    "Z": 7.959991455078125,
    "-": 6.253326416015625,
    "▬": 13,
    "ஜ": 12.3525390625,
    "۩": 7.80126953125,
    "۞": 14.09814453125,
    "░": 9.21044921875,
}
HELVETICA_NEUE_13_WIDTH = {
    "0": 6.5,
    "1": 6.5,
    "2": 6.5,
    "3": 6.5,
    "4": 6.5,
    "5": 6.5,
    "6": 6.5,
    "7": 6.5,
    "8": 6.5,
    "9": 6.5,
    "a": 5.77001953125,
    "b": 6.5,
    "c": 5.77001953125,
    "d": 6.5,
    "e": 5.77001953125,
    "f": 4.3291015625,
    "g": 6.5,
    "h": 6.5,
    "i": 3.61181640625,
    "j": 3.61181640625,
    "k": 6.5,
    "l": 3.61181640625,
    "m": 10.11181640625,
    "n": 6.5,
    "o": 6.5,
    "p": 6.5,
    "q": 6.5,
    "r": 4.3291015625,
    "s": 5.05908203125,
    "t": 3.61181640625,
    "u": 6.5,
    "v": 6.5,
    "w": 9.38818359375,
    "x": 6.5,
    "y": 6.5,
    "z": 5.77001953125,
    "A": 9.38818359375,
    "B": 8.6708984375,
    "C": 8.6708984375,
    "D": 9.38818359375,
    "E": 7.94091796875,
    "F": 7.22998046875,
    "G": 9.38818359375,
    "H": 9.38818359375,
    "I": 4.3291015625,
    "J": 5.05908203125,
    "K": 9.38818359375,
    "L": 7.94091796875,
    "M": 11.55908203125,
    "N": 9.38818359375,
    "O": 9.38818359375,
    "P": 7.22998046875,
    "Q": 9.38818359375,
    "R": 8.6708984375,
    "S": 7.22998046875,
    "T": 7.94091796875,
    "U": 9.38818359375,
    "V": 9.38818359375,
    "W": 12.27001953125,
    "X": 9.38818359375,
    "Y": 9.38818359375,
    "Z": 7.94091796875,
    "-": 4.3291015625,
    "▬": 13,
    "ஜ": 12.3525390625,
    "۩": 7.80126953125,
    "۞": 14.09814453125,
    "░": 9.21044921875,
}
HELVETICA_13_WIDTH = {
    "0": 7.22998046875,
    "1": 7.22998046875,
    "2": 7.22998046875,
    "3": 7.22998046875,
    "4": 7.22998046875,
    "5": 7.22998046875,
    "6": 7.22998046875,
    "7": 7.22998046875,
    "8": 7.22998046875,
    "9": 7.22998046875,
    "a": 7.22998046875,
    "b": 7.22998046875,
    "c": 6.5,
    "d": 7.22998046875,
    "e": 7.22998046875,
    "f": 3.61181640625,
    "g": 7.22998046875,
    "h": 7.22998046875,
    "i": 2.88818359375,
    "j": 2.88818359375,
    "k": 6.5,
    "l": 2.88818359375,
    "m": 10.8291015625,
    "n": 7.22998046875,
    "o": 7.22998046875,
    "p": 7.22998046875,
    "q": 7.22998046875,
    "r": 4.3291015625,
    "s": 6.5,
    "t": 3.61181640625,
    "u": 7.22998046875,
    "v": 6.5,
    "w": 9.38818359375,
    "x": 6.5,
    "y": 6.5,
    "z": 6.5,
    "A": 8.6708984375,
    "B": 8.6708984375,
    "C": 9.38818359375,
    "D": 9.38818359375,
    "E": 8.6708984375,
    "F": 7.94091796875,
    "G": 10.11181640625,
    "H": 9.38818359375,
    "I": 3.61181640625,
    "J": 6.5,
    "K": 8.6708984375,
    "L": 7.22998046875,
    "M": 10.8291015625,
    "N": 9.38818359375,
    "O": 10.11181640625,
    "P": 8.6708984375,
    "Q": 10.11181640625,
    "R": 9.38818359375,
    "S": 8.6708984375,
    "T": 7.94091796875,
    "U": 9.38818359375,
    "V": 8.6708984375,
    "W": 12.27001953125,
    "X": 8.6708984375,
    "Y": 8.6708984375,
    "Z": 7.94091796875,
    "-": 4.3291015625,
    "▬": 13,
    "ஜ": 12.3525390625,
    "۩": 7.80126953125,
    "۞": 14.09814453125,
    "░": 9.21044921875,
}
ARIAL_13_WIDTH = {
    "0": 7.22998046875,
    "1": 7.22998046875,
    "2": 7.22998046875,
    "3": 7.22998046875,
    "4": 7.22998046875,
    "5": 7.22998046875,
    "6": 7.22998046875,
    "7": 7.22998046875,
    "8": 7.22998046875,
    "9": 7.22998046875,
    "a": 7.22998046875,
    "b": 7.22998046875,
    "c": 6.5,
    "d": 7.22998046875,
    "e": 7.22998046875,
    "f": 3.61181640625,
    "g": 7.22998046875,
    "h": 7.22998046875,
    "i": 2.88818359375,
    "j": 2.88818359375,
    "k": 6.5,
    "l": 2.88818359375,
    "m": 10.8291015625,
    "n": 7.22998046875,
    "o": 7.22998046875,
    "p": 7.22998046875,
    "q": 7.22998046875,
    "r": 4.3291015625,
    "s": 6.5,
    "t": 3.61181640625,
    "u": 7.22998046875,
    "v": 6.5,
    "w": 9.38818359375,
    "x": 6.5,
    "y": 6.5,
    "z": 6.5,
    "A": 8.6708984375,
    "B": 8.6708984375,
    "C": 9.38818359375,
    "D": 9.38818359375,
    "E": 8.6708984375,
    "F": 7.94091796875,
    "G": 10.11181640625,
    "H": 9.38818359375,
    "I": 3.61181640625,
    "J": 6.5,
    "K": 8.6708984375,
    "L": 7.22998046875,
    "M": 10.8291015625,
    "N": 9.38818359375,
    "O": 10.11181640625,
    "P": 8.6708984375,
    "Q": 10.11181640625,
    "R": 9.38818359375,
    "S": 8.6708984375,
    "T": 7.94091796875,
    "U": 9.38818359375,
    "V": 8.6708984375,
    "W": 12.27001953125,
    "X": 8.6708984375,
    "Y": 8.6708984375,
    "Z": 7.94091796875,
    "-": 4.3291015625,
    "▬": 13,
    "ஜ": 12.3525390625,
    "۩": 7.80126953125,
    "۞": 14.09814453125,
    "░": 9.21044921875,
}
SEGOE_UI_13_WIDTH = {
    "0": 7.0078125,
    "1": 7.0078125,
    "2": 7.0078125,
    "3": 7.0078125,
    "4": 7.0078125,
    "5": 7.0078125,
    "6": 7.0078125,
    "7": 7.0078125,
    "8": 7.0078125,
    "9": 7.0078125,
    "a": 6.6142578125,
    "b": 7.642578125,
    "c": 6.0048828125,
    "d": 7.6552734375,
    "e": 6.79833984375,
    "f": 4.06884765625,
    "g": 7.6552734375,
    "h": 7.35693359375,
    "i": 3.1484375,
    "j": 3.1484375,
    "k": 6.4619140625,
    "l": 3.1484375,
    "m": 11.197265625,
    "n": 7.35693359375,
    "o": 7.6171875,
    "p": 7.642578125,
    "q": 7.6552734375,
    "r": 4.51953125,
    "s": 5.51611328125,
    "t": 4.4052734375,
    "u": 7.35693359375,
    "v": 6.22705078125,
    "w": 9.39453125,
    "x": 5.966796875,
    "y": 6.29052734375,
    "z": 5.8779296875,
    "A": 8.38525390625,
    "B": 7.4521484375,
    "C": 8.048828125,
    "D": 9.115234375,
    "E": 6.576171875,
    "F": 6.34765625,
    "G": 8.91845703125,
    "H": 9.2294921875,
    "I": 3.45947265625,
    "J": 4.64013671875,
    "K": 7.541015625,
    "L": 6.119140625,
    "M": 11.67333984375,
    "N": 9.724609375,
    "O": 9.80078125,
    "P": 7.28076171875,
    "Q": 9.80078125,
    "R": 7.77587890625,
    "S": 6.90625,
    "T": 6.81103515625,
    "U": 8.93115234375,
    "V": 8.07421875,
    "W": 12.14306640625,
    "X": 7.66796875,
    "Y": 7.185546875,
    "Z": 7.4140625,
    "-": 5.19873046875,
    "▬": 13,
    "ஜ": 12.3525390625,
    "۩": 7.80126953125,
    "۞": 14.09814453125,
    "░": 9.21044921875,
}
# FFZ default
NIRMALA_UI_13_WIDTH = {
    "0": 7.0078125,
    "1": 7.0078125,
    "2": 7.0078125,
    "3": 7.0078125,
    "4": 7.0078125,
    "5": 7.0078125,
    "6": 7.0078125,
    "7": 7.0078125,
    "8": 7.0078125,
    "9": 7.0078125,
    "a": 6.6142578125,
    "b": 7.642578125,
    "c": 6.0048828125,
    "d": 7.6552734375,
    "e": 6.79833984375,
    "f": 4.06884765625,
    "g": 7.6552734375,
    "h": 7.35693359375,
    "i": 3.1484375,
    "j": 3.1484375,
    "k": 6.4619140625,
    "l": 3.1484375,
    "m": 11.197265625,
    "n": 7.35693359375,
    "o": 7.6171875,
    "p": 7.642578125,
    "q": 7.6552734375,
    "r": 4.51953125,
    "s": 5.51611328125,
    "t": 4.4052734375,
    "u": 7.35693359375,
    "v": 6.22705078125,
    "w": 9.39453125,
    "x": 5.966796875,
    "y": 6.29052734375,
    "z": 5.8779296875,
    "A": 8.38525390625,
    "B": 7.4521484375,
    "C": 8.048828125,
    "D": 9.115234375,
    "E": 6.576171875,
    "F": 6.34765625,
    "G": 8.91845703125,
    "H": 9.2294921875,
    "I": 3.45947265625,
    "J": 4.64013671875,
    "K": 7.541015625,
    "L": 6.119140625,
    "M": 11.67333984375,
    "N": 9.724609375,
    "O": 9.80078125,
    "P": 7.28076171875,
    "Q": 9.80078125,
    "R": 7.77587890625,
    "S": 6.90625,
    "T": 6.81103515625,
    "U": 8.93115234375,
    "V": 8.07421875,
    "W": 12.14306640625,
    "X": 7.66796875,
    "Y": 7.185546875,
    "Z": 7.4140625,
    "-": 5.19873046875,
    "▬": 13,
    "ஜ": 12.3525390625,
    "۩": 7.80126953125,
    "۞": 14.09814453125,
    "░": 9.21044921875,
}
# Chatterino defaults...
# Windows
SEGOE_UI_10_WIDTH = {
    "0": 5.390625,
    "1": 5.390625,
    "2": 5.390625,
    "3": 5.390625,
    "4": 5.390625,
    "5": 5.390625,
    "6": 5.390625,
    "7": 5.390625,
    "8": 5.390625,
    "9": 5.390625,
    "a": 5.087890625,
    "b": 5.87890625,
    "c": 4.619140625,
    "d": 5.888671875,
    "e": 5.2294921875,
    "f": 3.1298828125,
    "g": 5.888671875,
    "h": 5.6591796875,
    "i": 2.421875,
    "j": 2.421875,
    "k": 4.970703125,
    "l": 2.421875,
    "m": 8.61328125,
    "n": 5.6591796875,
    "o": 5.859375,
    "p": 5.87890625,
    "q": 5.888671875,
    "r": 3.4765625,
    "s": 4.2431640625,
    "t": 3.388671875,
    "u": 5.6591796875,
    "v": 4.7900390625,
    "w": 7.2265625,
    "x": 4.58984375,
    "y": 4.8388671875,
    "z": 4.521484375,
    "A": 6.4501953125,
    "B": 5.732421875,
    "C": 6.19140625,
    "D": 7.01171875,
    "E": 5.05859375,
    "F": 4.8828125,
    "G": 6.8603515625,
    "H": 7.099609375,
    "I": 2.6611328125,
    "J": 3.5693359375,
    "K": 5.80078125,
    "L": 4.70703125,
    "M": 8.9794921875,
    "N": 7.48046875,
    "O": 7.5390625,
    "P": 5.6005859375,
    "Q": 7.5390625,
    "R": 5.9814453125,
    "S": 5.3125,
    "T": 5.2392578125,
    "U": 6.8701171875,
    "V": 6.2109375,
    "W": 9.3408203125,
    "X": 5.8984375,
    "Y": 5.52734375,
    "Z": 5.703125,
    "-": 3.9990234375,
    "▬": 10,
    "ஜ": 9.501953125,
    "۩": 6.0009765625,
    "۞": 10.8447265625,
    "░": 7.0849609375,
}
# macOS
HELVETICA_NEUE_12_WIDTH = {
    "0": 6,
    "1": 6,
    "2": 6,
    "3": 6,
    "4": 6,
    "5": 6,
    "6": 6,
    "7": 6,
    "8": 6,
    "9": 6,
    "a": 5.326171875,
    "b": 6,
    "c": 5.326171875,
    "d": 6,
    "e": 5.326171875,
    "f": 3.99609375,
    "g": 6,
    "h": 6,
    "i": 3.333984375,
    "j": 3.333984375,
    "k": 6,
    "l": 3.333984375,
    "m": 9.333984375,
    "n": 6,
    "o": 6,
    "p": 6,
    "q": 6,
    "r": 3.99609375,
    "s": 4.669921875,
    "t": 3.333984375,
    "u": 6,
    "v": 6,
    "w": 8.666015625,
    "x": 6,
    "y": 6,
    "z": 5.326171875,
    "A": 8.666015625,
    "B": 8.00390625,
    "C": 8.00390625,
    "D": 8.666015625,
    "E": 7.330078125,
    "F": 6.673828125,
    "G": 8.666015625,
    "H": 8.666015625,
    "I": 3.99609375,
    "J": 4.669921875,
    "K": 8.666015625,
    "L": 7.330078125,
    "M": 10.669921875,
    "N": 8.666015625,
    "O": 8.666015625,
    "P": 6.673828125,
    "Q": 8.666015625,
    "R": 8.00390625,
    "S": 6.673828125,
    "T": 7.330078125,
    "U": 8.666015625,
    "V": 8.666015625,
    "W": 11.326171875,
    "X": 8.666015625,
    "Y": 8.666015625,
    "Z": 7.330078125,
    "-": 3.99609375,
    "▬": 12,
    "ஜ": 11.40234375,
    "۩": 7.201171875,
    "۞": 13.013671875,
    "░": 8.501953125,
}
# true default
ARIAL_11_WIDTH = {
    "0": 6.11767578125,
    "1": 6.11767578125,
    "2": 6.11767578125,
    "3": 6.11767578125,
    "4": 6.11767578125,
    "5": 6.11767578125,
    "6": 6.11767578125,
    "7": 6.11767578125,
    "8": 6.11767578125,
    "9": 6.11767578125,
    "a": 6.11767578125,
    "b": 6.11767578125,
    "c": 5.5,
    "d": 6.11767578125,
    "e": 6.11767578125,
    "f": 3.05615234375,
    "g": 6.11767578125,
    "h": 6.11767578125,
    "i": 2.44384765625,
    "j": 2.44384765625,
    "k": 5.5,
    "l": 2.44384765625,
    "m": 9.1630859375,
    "n": 6.11767578125,
    "o": 6.11767578125,
    "p": 6.11767578125,
    "q": 6.11767578125,
    "r": 3.6630859375,
    "s": 5.5,
    "t": 3.05615234375,
    "u": 6.11767578125,
    "v": 5.5,
    "w": 7.94384765625,
    "x": 5.5,
    "y": 5.5,
    "z": 5.5,
    "A": 7.3369140625,
    "B": 7.3369140625,
    "C": 7.94384765625,
    "D": 7.94384765625,
    "E": 7.3369140625,
    "F": 6.71923828125,
    "G": 8.55615234375,
    "H": 7.94384765625,
    "I": 3.05615234375,
    "J": 5.5,
    "K": 7.3369140625,
    "L": 6.11767578125,
    "M": 9.1630859375,
    "N": 7.94384765625,
    "O": 8.55615234375,
    "P": 7.3369140625,
    "Q": 8.55615234375,
    "R": 7.94384765625,
    "S": 7.3369140625,
    "T": 6.71923828125,
    "U": 7.94384765625,
    "V": 7.3369140625,
    "W": 10.38232421875,
    "X": 7.3369140625,
    "Y": 7.3369140625,
    "Z": 6.71923828125,
    "-": 3.6630859375,
    "▬": 11,
    "ஜ": 10.4521484375,
    "۩": 6.60107421875,
    "۞": 11.92919921875,
    "░": 7.79345703125,
}

FONT_LIST = []
current_locals = locals()
for local in list(current_locals):
    if "_WIDTH" in local:
        FONT_LIST.append(current_locals[local])

del current_locals
AVERAGE_WIDTH = {}


def make_reducer(char: str) -> function:
    return lambda x, y: x + y[char]


for char in f"{ascii_letters}{digits}-▬ஜ۩۞░":
    reducer = make_reducer(char)
    AVERAGE_WIDTH[char] = reduce(reducer, FONT_LIST, 0) / len(FONT_LIST)
